<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="我是谁？我在做什么？我为什么要这么做？我想做什么？我要怎么做？">
<meta property="og:type" content="website">
<meta property="og:title" content="Sparky">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="Sparky">
<meta property="og:description" content="我是谁？我在做什么？我为什么要这么做？我想做什么？我要怎么做？">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Sparky">
<meta name="twitter:description" content="我是谁？我在做什么？我为什么要这么做？我想做什么？我要怎么做？">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"right","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/2/"/>





  <title>Sparky</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?23f2f984b557cd9c31da9a75b4da08e4";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-right 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Sparky</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/06/fbreader笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Sparky">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/logo_s.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sparky">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/06/fbreader笔记/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-06T20:11:39+08:00">
                2019-05-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="FBReader项目笔记"><a href="#FBReader项目笔记" class="headerlink" title="FBReader项目笔记"></a>FBReader项目笔记</h2><h3 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h3><p><img src="https://github.com/douyn/BlogResource/blob/master/res/image/fbreader%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84.png?raw=true" alt="fbreader项目结构"></p>
<p><img src="https://github.com/douyn/BlogResource/blob/master/res/image/jni%E6%BA%90%E7%A0%81%E7%BB%93%E6%9E%84.png?raw=true" alt="jni源码结构"></p>
<p><img src="https://github.com/douyn/BlogResource/blob/master/res/image/assert%E7%BB%93%E6%9E%84.png?raw=true" alt="assets结构"></p>
<p><img src="" alt="java代码结构"><br>java代码没有看完，有的类自己也不知道是做什么的</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/06/kernel目录结构/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Sparky">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/logo_s.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sparky">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/06/kernel目录结构/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-06T20:11:27+08:00">
                2019-05-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="kernel源码目录"><a href="#kernel源码目录" class="headerlink" title="kernel源码目录"></a>kernel源码目录</h2><h6 id="Document"><a href="#Document" class="headerlink" title="Document"></a>Document</h6><p>一些说明文档</p>
<h6 id="android"><a href="#android" class="headerlink" title="android"></a>android</h6><h6 id="arch"><a href="#arch" class="headerlink" title="arch"></a>arch</h6><p>所有与系统架构相关的代码都保存在此目录以及include/asm-xx目录中，每种架构对应的子目录都包括下边的目录</p>
<ul>
<li>kernel, 存放支持系统架构所特有的诸如信号量处理和SMP之类特征的实现。</li>
<li>lib，存放体系结构特有的诸如strlen和memcpy之类的通用函数的实现。</li>
<li>mm，存放体系结构特有的内存管理程序的实现。</li>
</ul>
<p>除了上述的3个子目录之外，大多数还有boot目录，存放这种硬件平台上启动内核所使用的部分或者全部平台特有代码。</p>
<h6 id="block"><a href="#block" class="headerlink" title="block"></a>block</h6><p>保存了block层的实现代码</p>
<h6 id="crypto"><a href="#crypto" class="headerlink" title="crypto"></a>crypto</h6><p>保存了内核本身所使用的加密api信息，实现了常用的加密和散列算法，还有一些压缩和crc校验算法</p>
<h6 id="drivers"><a href="#drivers" class="headerlink" title="drivers"></a>drivers</h6><p>显卡，网卡，scsi适配器，pci总线，usb总线和其它linux支持的外围设备或总线的驱动程序都可以在这里找到。</p>
<h6 id="firmware"><a href="#firmware" class="headerlink" title="firmware"></a>firmware</h6><h6 id="fs"><a href="#fs" class="headerlink" title="fs"></a>fs</h6><p>此目录保存了虚拟文件系统的代码还有各个不同文件系统的代码。linux支持的所有文件系统在fs下都有一个对应的目录。</p>
<h6 id="include"><a href="#include" class="headerlink" title="include"></a>include</h6><p>此目录包括内核中大部分的头文件，</p>
<h6 id="init"><a href="#init" class="headerlink" title="init"></a>init</h6><p>保存内核的初始化代码，包括main.c、创建早期用户空间的代码以及其它初始化代码。</p>
<h6 id="ipc"><a href="#ipc" class="headerlink" title="ipc"></a>ipc</h6><p>包含了共享内存，信号量和其它形式ipc的代码</p>
<h6 id="kernel"><a href="#kernel" class="headerlink" title="kernel"></a>kernel</h6><p>内核中最核心的部分，包括了进程的调度，以及进程的创建和销毁等，和系统架构有关的另外一部分代码在arch/../kernel目录下</p>
<h6 id="lib"><a href="#lib" class="headerlink" title="lib"></a>lib</h6><p>此目录保存了库代码，这些代码实现了一个标准C库的通用子集，包括字符串和内存操作等函数</p>
<h6 id="mm"><a href="#mm" class="headerlink" title="mm"></a>mm</h6><p>包含和与系统架构无关的内存管理的代码，与体系有关的内存管理的代码在arch/../mm目录下</p>
<h6 id="net"><a href="#net" class="headerlink" title="net"></a>net</h6><p>保存了和网络相关的代码，实现了常见的网络协议,如TCP/IP,IPX等</p>
<h6 id="samples"><a href="#samples" class="headerlink" title="samples"></a>samples</h6><h6 id="scripts"><a href="#scripts" class="headerlink" title="scripts"></a>scripts</h6><p>包含了配置内核的脚本文件。如make menuconfig，make xconfig等</p>
<h6 id="security"><a href="#security" class="headerlink" title="security"></a>security</h6><p>包含了linux不同的安全模型的代码，比如linux se</p>
<h6 id="sound"><a href="#sound" class="headerlink" title="sound"></a>sound</h6><p>保存了声卡驱动以及其它声音相关的代码</p>
<h6 id="tools"><a href="#tools" class="headerlink" title="tools"></a>tools</h6><h6 id="usr"><a href="#usr" class="headerlink" title="usr"></a>usr</h6><p>实现了用于打包和压缩的cpio</p>
<h6 id="virt"><a href="#virt" class="headerlink" title="virt"></a>virt</h6>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/06/全志B288修改日志/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Sparky">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/logo_s.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sparky">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/06/全志B288修改日志/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-06T20:11:00+08:00">
                2019-05-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="全志B288修改日志"><a href="#全志B288修改日志" class="headerlink" title="全志B288修改日志"></a>全志B288修改日志</h2><ul>
<li><p>2018.3.2 【修改】隐藏NavigationBar， 步骤: frameworks/base/packages/SystemUI/src/com/android/systemui/statusbar/phone/PhoneStatusBar,java文件line 431设置showNav = false;</p>
</li>
<li><p>2018/3/5 【修改】修改lcd_density默认配置为160,步骤：device/softwinner/lark-eink-perf/lark_eink_perf.mk,修改ro.sf.lcd_density=167 –&gt; ro.sf.lcd_density=160 （删除out/target/product/lark-eink-perf1/system/build.prop之后再编译）</p>
</li>
<li><p>2018/3/5 【修改】预置apk，步骤：</p>
<ol>
<li><p>添加lib库。将apk里依赖的so库复制到device/softwinner/lark-common/prebuild/apklib/，修改device/softwinner/lark-common/prebuild/apklib/下的Android.mk文件，</p>
<pre><code>include $(CLEAR_VARS)
LOCAL_MODULE_TAGS := optional
LOCAL_PREBUILT_LIBS := libBugly.so libluajit.so liblzma.so
include $(BUILD_MULTI_PREBUILT)
</code></pre></li>
<li><p>添加apk。将apk包复制到device/softwinner/lark-common/prebuild/apk/,修改device/softwinner/lark-common/prebuild/Android.mk文件，</p>
<pre><code>include $(CLEAR_VARS)
LOCAL_MODULE := MuPDF
LOCAL_MODULE_TAGS := optional
LOCAL_SRC_FILES := MuPDF.apk
LOCAL_MODULE_CLASS := APPS
LOCAL_MODULE_SUFFIX := $(COMMON_ANDROID_PACKAGE_SUFFIX)
LOCAL_CERTIFICATE := PRESIGNED
LOCAL_REQUIRED_MODULES := libmupdf_java
include $(BUILD_PREBUILT)
</code></pre></li>
<li><p>添加到配置文件。进入lark-eink-perf1这个我们要编译的设备的目录，修改下边的lark-eink-perf1.mk，</p>
<pre><code>PRODUCT_PACKAGES += MuPDF
</code></pre><blockquote>
<p>注意：apk需要是系统签名的apk</p>
</blockquote>
</li>
</ol>
</li>
<li><p>设置默认launcher，方法：参考<a href="http://blog.csdn.net/fireness/article/details/48177923" target="_blank" rel="noopener">android 开机默认进入指定Launcher@闲庭信步_wwd</a>，1. 修改开机启动的默认launcher。在frameworks/base/services/java/com/android/server/am/ActivityManagerService.java文件下，修改startHomeActivityLocked()方法为如下,</p>
<pre><code>boolean startHomeActivityLocked(int userId) {
if (mHeadless) {
// Added because none of the other calls to ensureBootCompleted seem to fire
// when running headless.
ensureBootCompleted();
return false;
}

if (mFactoryTest == SystemServer.FACTORY_TEST_LOW_LEVEL
    &amp;&amp; mTopAction == null) {
// We are running in factory test mode, but unable to find
// the factory test app, so just sit around displaying the
// error message and don&apos;t try to start anything.
return false;
</code></pre><p>  }<br>  Intent intent = getHomeIntent();<br>  ActivityInfo aInfo =</p>
<pre><code>resolveActivityInfo(intent, STOCK_PM_FLAGS, userId);
if (aInfo != null) {
//add wwd start
PackageManager pm = mContext.getPackageManager();
Intent newintent = new Intent(Intent.ACTION_MAIN);
newintent.addCategory(Intent.CATEGORY_HOME);

List&lt;ResolveInfo&gt; resolveInfoList = pm.queryIntentActivities(newintent, 0);
//判断带有Intent.CATEGORY_HOME标签的所有activity中如果有你指定的activity则替换
if(resolveInfoList != null){
    int size = resolveInfoList.size();
    for(int i = 0; i &lt; size; i++){
        ResolveInfo rInfo = resolveInfoList.get(i);
        if(rInfo.activityInfo.name.equals(&quot;com.android.launcher3.Launcher&quot;)){
            aInfo = rInfo.activityInfo;
        }
    }
}
//add wwd stop
intent.setComponent(new ComponentName(
        aInfo.applicationInfo.packageName, aInfo.name));
// Don&apos;t do this if the home app is currently being
// instrumented.
aInfo = new ActivityInfo(aInfo);
aInfo.applicationInfo = getAppInfoForUser(aInfo.applicationInfo, userId);
ProcessRecord app = getProcessRecordLocked(aInfo.processName,
        aInfo.applicationInfo.uid, true);
if (app == null || app.instrumentationClass == null) {
    intent.setFlags(intent.getFlags() | Intent.FLAG_ACTIVITY_NEW_TASK);
    //这里启动你已替换过的activity
    mStackSupervisor.startHomeActivity(intent, aInfo);
}
}

return true;
}
</code></pre><p>  2.修改按home键强制启动的launcher。在frameworks/base/policy/src/com/android/internal/policy/impl/PhoneWindowManager.java文件中，修改init()为：</p>
<pre><code>public void init(Context context, IWindowManager windowManager,
    WindowManagerFuncs windowManagerFuncs) {
    ......
    mHomeIntent =  new Intent(Intent.ACTION_MAIN, null);
mHomeIntent.addCategory(Intent.CATEGORY_HOME);
//add wwd start
ComponentName mHomecom = new ComponentName(&quot;com.android.launcher3&quot;, &quot;com.android.launcher3.Launcher&quot;); 
mHomeIntent.setComponent(mHomecom);
//add wwd stop
mHomeIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK
        | Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);
    ......
}
</code></pre></li>
<li><p>2018/3/8 修改默认参数，</p>
<pre><code>1. 默认屏幕亮度，在frameworks/base/packages/SettingProvider/res/values/default.xml
    &lt;!-- Default screen brightness, from 0 to 255.  102 is 40%. --&gt;
    &lt;integer name=&quot;def_screen_brightness&quot;&gt;102&lt;/integer&gt;
2. 默认屏幕关闭时间
    在frameworks/base/packages/SettingProvider/res/values/default.xml，
    &lt;integer name=&quot;def_screen_off_timeout&quot;&gt;300000&lt;/integer&gt;
3. 默认字体大小，小/普通/大/很大 分别对应 0.85/1/1.15/1.3
    在/b288/android/device/softwinner/lark-eink-perf1/lark_eink_perf1.mk
    PRODUCT_PROPERTY_OVERRIDES += \
    ro.font.scale=1.15 \            
</code></pre></li>
<li><p>2018/3/12，预置文件到sdcard.在device.mk文件中添加    </p>
<pre><code>PRODUCT_COPY_FILES += \
    ${源文件位置}:${内置到的系统位置}

例如
PRODUCT_COPY_FILES += \
    device/softwinner/lark-eink-perf1/media/testbooks/xx.txt:system/media/testbook/xx.txt \
</code></pre></li>
<li><p>2018/5/14, 显示屏显示异常. 烧入程序之后,由于之前设备烧入过linux程序,系统中存在以下两个文件private/default.bin,private/default_4.bin,在系统启动时默认先使用private路径下的default.bin文件,导致设置vcom电压不对,所以这里删除default.bin和default_4.bin.在串口或者adb中使用命令 </p>
<pre><code>mount -o remount,rw /private
rm default.bin
rm default_4.bin, reboot
</code></pre></li>
<li><p>2018/5/15, 更改开机铃声大小, 修改有两种方式. 第一种是直接用软件修改声音文件的大小,这种可以让客户提供合适的声音文件放在/device/softwinner/lark-eink-perf1/media下,命名为boot.wav即可. 第二种方法通过代码修改,在frameworks/base/cmds/bootanimation/BootAnimation.cpp,在playBootMusic方法中,再mp -&gt; prepare之前添加</p>
<pre><code>set volume level
float volume = 0.9;
mp-&gt;setVolume(volume, volume);
</code></pre></li>
<li><p>2018/5/15, 关闭开机启动的log. </p>
<pre><code>echo 0 &gt; /prop/sys/kernel/printk
</code></pre></li>
<li><p>2018/5/15, 修改开机log,开机log是再kernel层修改的.文件是在/lichee/tools/pack/chips/sun8iw10p1/boot-resource/boot-resource下的bootlogo.bmp,直接同名覆盖即可.</p>
</li>
<li>2018/5/15, 修改开机动画.开机动画的存放位置是再/device/softwinner/lark-eink-perf1/media下的bootanimation.zip,和开机铃声再同一目录下.</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/06/编译sdk修改日志/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Sparky">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/logo_s.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sparky">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/06/编译sdk修改日志/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-06T20:11:00+08:00">
                2019-05-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="编译sdk修改"><a href="#编译sdk修改" class="headerlink" title="编译sdk修改"></a>编译sdk修改</h2><ol>
<li>~/dou/b288/android/build/target/product/generic_no_telephony.mk  </li>
<li>~/dou/b288/android/build/target/product/embedded.mk</li>
<li>./device/softwinner/lark-common/prebuild/tools/tools.mk</li>
<li>./device/softwinner/lark-common/lark-common.mk 没改</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/06/vim比较文件的用法/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Sparky">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/logo_s.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sparky">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/06/vim比较文件的用法/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-06T20:11:00+08:00">
                2019-05-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="使用vim-d比较两个文件的内容"><a href="#使用vim-d比较两个文件的内容" class="headerlink" title="使用vim -d比较两个文件的内容"></a>使用vim -d比较两个文件的内容</h2><h4 id="1-使用vim的比较模式打开两个文件"><a href="#1-使用vim的比较模式打开两个文件" class="headerlink" title="1. 使用vim的比较模式打开两个文件"></a>1. 使用vim的比较模式打开两个文件</h4><pre><code>vim -d file1 file2
# 或者
vimdiff file1 file2
</code></pre><h4 id="2-如果已经打开一个文件-然后需要对比另外一个文件"><a href="#2-如果已经打开一个文件-然后需要对比另外一个文件" class="headerlink" title="2. 如果已经打开一个文件,然后需要对比另外一个文件"></a>2. 如果已经打开一个文件,然后需要对比另外一个文件</h4><pre><code>:vert diffsplit file2
</code></pre><h4 id="3-调整窗口位置"><a href="#3-调整窗口位置" class="headerlink" title="3. 调整窗口位置"></a>3. 调整窗口位置</h4><pre><code>ctrl+W L
ctrl+W H
ctrl+W J
ctrl+W K
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/06/ubuntu使用串口工具/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Sparky">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/logo_s.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sparky">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/06/ubuntu使用串口工具/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-06T20:11:00+08:00">
                2019-05-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="ubuntu下使用串口工具"><a href="#ubuntu下使用串口工具" class="headerlink" title="ubuntu下使用串口工具"></a>ubuntu下使用串口工具</h2><p>工具: minicom</p>
<p>步骤：</p>
<ol>
<li><p>安装。 </p>
<pre><code>sudo apt-get install minicom
</code></pre></li>
<li><p>查看所有串口。</p>
<pre><code>cd /
ls dev/tty*
</code></pre></li>
<li><p>连接串口线，查看正在使用的串口。</p>
<pre><code>dmesg | grep tty // usb 3-4: pl2303 converter now attached to ttyUSB0，其中attached to xx表示目前正在使用的串口为xx。
</code></pre></li>
<li><p>修改minicom配置。</p>
<pre><code>sudo minicom -s
选择Serial port setup
再按a，修改serial device值为上一步的xx串口
按回车回到菜单页，在选择save as dfl保存设置
</code></pre></li>
<li>打开串口查看日志。<pre><code>sudo minicom 打开串口连接，ctrl+a再按x退出
</code></pre></li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/06/linux系统标准视图/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Sparky">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/logo_s.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sparky">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/06/linux系统标准视图/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-06T20:11:00+08:00">
                2019-05-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="linux操作系统的标准视图"><a href="#linux操作系统的标准视图" class="headerlink" title="linux操作系统的标准视图"></a>linux操作系统的标准视图</h2><h3 id="上层"><a href="#上层" class="headerlink" title="上层"></a>上层</h3><h4 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h4><h4 id="标准c库"><a href="#标准c库" class="headerlink" title="标准c库"></a>标准c库</h4><h3 id="中层"><a href="#中层" class="headerlink" title="中层"></a>中层</h3><h4 id="系统无关部分"><a href="#系统无关部分" class="headerlink" title="系统无关部分"></a>系统无关部分</h4><h4 id="功能模块"><a href="#功能模块" class="headerlink" title="功能模块"></a>功能模块</h4><h6 id="系统调用接口"><a href="#系统调用接口" class="headerlink" title="系统调用接口"></a>系统调用接口</h6><p>为了与用户应用程序进行交互，内核提供了一组系统调用的接口，通过这些接口可以访问系统硬件和各种操作系统资源。</p>
<h6 id="进程管理"><a href="#进程管理" class="headerlink" title="进程管理"></a>进程管理</h6><p>进程管理负责创建和销毁进程，并处理他们之间的互相联系，同时调度他们去分享cpu。</p>
<h6 id="内存管理"><a href="#内存管理" class="headerlink" title="内存管理"></a>内存管理</h6><p>根据不同的需求，提供malloc/free在内的许多简单或者复杂的接口，并为每个进程都提供了一个虚拟的地址空间，基本上实现虚拟内存对进程的按需分配。</p>
<h6 id="文件系统"><a href="#文件系统" class="headerlink" title="文件系统"></a>文件系统</h6><p>虚拟文件系统为用户控件提供了文件系统接口，同时又为各个具体的文件系统提供了通用的接口抽象。</p>
<h6 id="网络管理"><a href="#网络管理" class="headerlink" title="网络管理"></a>网络管理</h6><p>网络子系统处理数据包的收集，标识，分发，路由和地址的解析等所有网络相关的操作。</p>
<h6 id="设备驱动程序"><a href="#设备驱动程序" class="headerlink" title="设备驱动程序"></a>设备驱动程序</h6><p>操作系统的目的是为用户提供一种方便访问硬件的途径。</p>
<h4 id="系统相关部分"><a href="#系统相关部分" class="headerlink" title="系统相关部分"></a>系统相关部分</h4><h4 id="硬件设备"><a href="#硬件设备" class="headerlink" title="硬件设备"></a>硬件设备</h4>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/06/b300/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Sparky">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/logo_s.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sparky">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/06/b300/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-06T20:11:00+08:00">
                2019-05-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="b300问题记录"><a href="#b300问题记录" class="headerlink" title="b300问题记录"></a>b300问题记录</h1><h3 id="1-编译Android报错"><a href="#1-编译Android报错" class="headerlink" title="1. 编译Android报错"></a>1. 编译Android报错</h3><h4 id="1-lex报错"><a href="#1-lex报错" class="headerlink" title="1. lex报错"></a>1. lex报错</h4><h5 id="现象"><a href="#现象" class="headerlink" title="现象"></a>现象</h5><pre><code>Server is already running
[  0% 23/59782] Lex: applypatch &lt;= bootable/recovery/edify/lexer.ll
FAILED: out/target/product/virgo-perf1/obj/STATIC_LIBRARIES/libedify_intermediates/lexer.cpp 
/bin/bash -c &quot;prebuilts/misc/linux-x86/flex/flex-2.5.39 -oout/target/product/virgo-perf1/obj/STATIC_LIBRARIES/libedify_intermediates/lexer.cpp bootable/recovery/edify/lexer.ll&quot;
flex-2.5.39: loadlocale.c:130:_nl_intern_locale_data: ?? &apos;cnt &lt; (sizeof (_nl_value_type_LC_TIME) / sizeof (_nl_value_type_LC_TIME[0]))&apos; ???
Aborted (core dumped)
[  0% 28/59782] //frameworks/base/libs/androidfw:libandroidfw clang++ AssetManager.cpp [linux]
ninja: build stopped: subcommand failed.
16:13:39 ninja failed with: exit status 1
</code></pre><h5 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h5><p>在.bashrc中加变量</p>
<pre><code>export LC_ALL=C 
</code></pre><h4 id="2-out-of-memery"><a href="#2-out-of-memery" class="headerlink" title="2. out of memery"></a>2. out of memery</h4><h5 id="现象-1"><a href="#现象-1" class="headerlink" title="现象"></a>现象</h5><pre><code>[ 76% 45967/59739] Building with Jack: out/target/common/obj/JAVA_LIBRARIES/framework_intermediates/with-local/classes.dex
FAILED: out/target/common/obj/JAVA_LIBRARIES/framework_intermediates/with-local/classes.dex 
/bin/bash out/target/common/obj/JAVA_LIBRARIES/framework_intermediates/with-local/classes.dex.rsp
Out of memory error (version 1.3-rc7 &apos;Douarn&apos; (445000 d7be3910514558d6715ce455ce0861ae2f56925a by android-jack-team@google.com)).
Java heap space.
Try increasing heap size with java option &apos;-Xmx&lt;size&gt;&apos;.
Warning: This may have produced partial or corrupted output.
[ 76% 45972/59739] //art/runtime:libartd clang++ entrypoints/quick/quick_jni_entrypoints.cc [linux]
ninja: build stopped: subcommand failed.
</code></pre><h5 id="解决-1"><a href="#解决-1" class="headerlink" title="解决"></a>解决</h5><p>命令行执行以下命令</p>
<pre><code>export JACK_SERVER_VM_ARGUMENTS=&quot;-Dfile.encoding=UTF-8 -XX:+TieredCompilation -Xmx4g&quot;
./prebuilts/sdk/tools/jack-admin kill-server
./prebuilts/sdk/tools/jack-admin start-server
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/06/b288编译和烧录/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Sparky">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/logo_s.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sparky">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/06/b288编译和烧录/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-06T20:11:00+08:00">
                2019-05-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="全志B288编译和烧录"><a href="#全志B288编译和烧录" class="headerlink" title="全志B288编译和烧录"></a>全志B288编译和烧录</h2><h5 id="编译方法"><a href="#编译方法" class="headerlink" title="编译方法"></a>编译方法</h5><ol>
<li>登录ssh服务。</li>
<li>进入源码目录。</li>
<li>修改源码。</li>
<li><p>编译。</p>
<pre><code>1. 进入源码根目录
2. source build/envsetup.sh 
3. lunch lark-eink-perf1-eng 
4. extract-bsp 
5. make -j5 
6. pack 
</code></pre></li>
</ol>
<h5 id="烧录方法"><a href="#烧录方法" class="headerlink" title="烧录方法"></a>烧录方法</h5><ol>
<li>下载烧录工具phoenixsuit。</li>
<li>设备关机。</li>
<li>按住reset键，同时插上usb接口充电，虚拟机上选择usb设备筛选器选择Onda，如果操作正确phoenixsuit就会弹出烧录选项，点击确定。</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/06/Android系统build/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Sparky">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/logo_s.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sparky">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/06/Android系统build/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-06T20:11:00+08:00">
                2019-05-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Android系统build-prop生成过程"><a href="#Android系统build-prop生成过程" class="headerlink" title="Android系统build.prop生成过程"></a>Android系统build.prop生成过程</h2><p>这个文件类似于windows的注册表文件，定义了系统初始的一些参数属性，功能的开放等，通过调整或增加这些参数可以达到校调系统性能偏重点和附加功能开启的作用。</p>
<p>我们经常说rom是刷系统的意思，但是rom的愿意是read only memory，只读存储器，正因为是只读了，所以文件系统通常会存储在手机rom中，但是在特殊情况下我们可以对rom进行写操作。</p>
<pre><code># begin build properties （开始设置系统性能）
# autogenerated （通过设置形成系统信息）
ro.=GRI40 (版本ID)
ro.build.=GRJ22 （版本号）
ro.build.version.incremental=eng.buildbot.20110619.060228 （版本增量）
ro.build.version.sdk=10 （sdk版本）
ro.build.version.codename=REL （版本代号）
ro.build.version.release=2.3.4 （Android 2.3.4系统）
ro.build.date=Sun Jun 19 06:02:58 UTC 2011 （制作者及制作时间）
ro.build.date.utc=0
ro.build.type=user (编译模式,如user,userdebug,eng,test模式)
ro.build.user=buildbot (编译账户)
ro.build.host=bb1 (编译主机系统)
ro.build.tags=test-keys (编译标签)
ro.product.model=HTC Wildfire （HTC内部手机代号）
ro.product.brand=htc_wwe （手机品牌）
ro.product.name=htc_buzz （手机正式名称）
ro.product.device=buzz （采用的设备）
ro.product.board=buzz （采用的处理器）
ro.product.cpu.abi=armeabi-v6j （cpu的版本）
ro.product.cpu.abi2=armeabi （cpu的品牌）
ro.product.manufacturer=HTC （手机制造商）
ro.product.locale.language=zh （手机默认语言）
ro.product.locale.region=CN （地区语言）
ro.wifi.channels= （WIFI连接的渠道）
ro.board.platform=msm7k （主板平台）
# ro.build.product is obsolete; use ro.product.device （旧代码ro.build.product，使用代码ro.product.device）
ro.build.product=buzz （建立产品）
# Do not try to parse ro.build.description or .fingerprint （不要试图修改description和fingerprint）
ro.build.description=passion-user 2.3.3 GRI40 102588 release-keys （用户的KEY）
ro.build.fingerprint=google/passion/passion:2.3.3/GRI40/102588:user/release-keys （系统指纹）
# end build properties （性能代码完毕）
#
# system.prop for buzz （系统技术支持由BUZZ提供）
#
# Density in DPI of the LCD of this board. This is used to scale the UI （高密度的液晶的DPI板。这是用来大规模UI的）
# appropriately. If this property is not defined, the default value is 160 dpi. （appropriately.如果这个属性没有定义,缺省值是160 dpi的分辨率）
ro.sf.lcd_density=240 （显示屏分辨率，数值越大分辨率越底，240就是800*480的）
# View configuration for QVGA. （屏幕的设置）
view.fading_edge_length=8
view.touch_slop=15 （触摸屏灵敏度，数值越大越灵敏）
view.minimum_fling_velocity=25 （滑动速度）
view.scroll_friction=0.008 （滑动误差）
# RIL specific configuration. （特定设置）
rild.libpath=/system/lib/libhtc_
ro.ril.ecc.HTC-WWE=999
ro.ril.ecc.HTC-ELL=92,93,94
ro.ril.enable.a52.HTC-ITA=1
ro.ril.enable.a53.HTC-ITA=1
ro.ril.enable.a52=0
ro.ril.enable.a53=1
ro.ril.vmail.23415=1571,BT
ro.ril.hsdpa.category=8 （hsdpa全称High Speed Downlink Packet Access中文意思：高速下行分组接入,设置的数越大传输越快）
ro.ril.htcmaskw1.bitmask=429496
ro.ril.htcmaskw1=14449
ro.ril.def.agps.mode=2 （打开AGPS服务支持，可改为ro.ril.def.agps.mode=0 改后能省电但GPS定位速度会变慢）
ro.ril.gprsclass=12 （GPRS设置）
# For HSDPA low throughput （HSDPA低输量）
ro.ril.disable.power.collapse=1 （关闭电源）
# Modify MMS APN retry timer from 5s to 2s. （修改短信的APN设置5秒为2秒）
ro.gsm.2nd_data_retry_config=max_retries=3, 2000, 2000, 2000
# Time between scans in seconds. Keep it high to minimize battery drain.（扫描在几秒之内，可降低用电量）
# This only affects the case in which there are remembered access points, （这个修改仅能影响此文件）
# but none are in range.（但是没有一项是在范围内的）
wifi.interface=eth0 （WIFI界面）
wifi.supplicant_scan_interval=45 （WIFI扫描间隔时间，这里设置是45秒。把这个时间设置长点能省电）
# Mobile data interfaces （移动数据的接口）
mobiledata.interfaces=rmnet0,rmnet1,rmnet2
# Allow or deny tethering. （允许和拒绝绑定）
ro.tether.denied=false
# Default network type. （默认的网络类型）
# 0 =&gt; WCDMA Preferred. （0=WCDMA优先）
ro.telephony.default_network=0
# Enable Google-specific location features, （谷歌特定地点的设置）
# like NetworkLocationProvider and LocationCollector.（如网络服务器提供商和服务器位置）
ro.c o m.google.locationfeatures=1
# The OpenGL ES API level that is natively supported by this device. （开放式绘图介面）
# This is a 16.16 fixed point number. （界面有16个点，16个不动点数量）
ro.opengles.version=65536 （开放式绘图介面参数）
# Disable fs check on boot by default. （开机时默认禁用FS检查）
sys.checkfs.fat=false
# Performance settings. （性能设置）
dalvik.vm.execution-mode=int:jit
dalvik.vm.heapsize=24m （虚拟内存大小，可设置为16m或24m或32m或48m）
persist.sys.use_dithering=1
persist.sys.purgeable_assets=1
# Increase SKIA decode memory capability for progressive jpg file.
ro.media.dec.jpeg.memcap=20000000
#
# ADDITIONAL_BUILD_PROPERTIES （其他性能设置）
no_require_sim=true （手机卡保护设置）
ro.rommanager.developerid=cyanogenmodnightly （固件管理器开发者是CM大神）
ro.url.legal=http://www./intl/%s/mobile/android/basic/phone-legal.html
ro.url.legal.android_privacy=http://www]/intl/%s/mobile/android/basic/privacy.html
ro. com.google.clientidbase=android-google （谷歌客户身份）
ro. com.android.wifi-watchlist=GoogleGuest （WIFI用户名单）
ro.setupwizard.enterprise_mode=1 （默认情景模式）
ro. com.android.dateformat=MM-dd-yyyy （默认时间格式，改为yyyy-MM-dd，显示效果就是XXXX年XX月XX日）
ro. com.android.dataroaming=false （漫游设置）
ro.config.ringtone=Playa.ogg （默认铃声设置，文件在/system/media/audio/ringtones 把喜欢的铃声放这里，比如123. MP3放入ringtones文件夹中，这里代码改为ro.config.ringtone=123. mp3）
ro.config.notification_sound=regulus.ogg （默认提示音，文件在/system/media/audio/notifications 修改方法同上）
ro.config.alarm_alert=Alarm_Beep_03.ogg （默认闹铃，文件在/system/media/audio/alarms 修改方法同上）
ro.modversion=CyanogenMod-7-06192011-NIGHTLY-buzz （版本信息，改这个能让你大名出现系统关于中，改为ro.modversion=xxxxx）
ro.setupwizard.mode=OPTIONAL （安装向导模式）
net. bt. name=Android （系统名称）
dalvik.vm.stack-trace-file=/data/anr/traces.txt        

Dalvik虚拟机
Dalvik虚拟机是Android操作系统的核心，是一切应用程序的基础。所有程序在运行时均有Dalvik虚拟机对其进行解析和执行。
dalvik.vm.startheapsize：
本参数控制Dalvik虚拟机在启动一个应用程序之后为其分配的初始堆栈大小，可填写的值为2m~48m。
例如：dalvik.vm.startheapsize=8m，就表示应用程序启动后为其分配的初始堆栈大小为8兆字节。
这里分配的内存容量会影响到整个系统对RAM的使用程度，和第一次使用应用程序时的流畅程序。这个值越大，系统消耗RAM则越快，但是应用程序打开后的反应也越快。值越小，系统的RAM剩余则越多，但是程序在启动后会很卡。
建议值是8m，既可以保持140M左右的RAM，程序的反应速度也会大幅度提高。
dalvik.vm.heapsize：
本参数控制Dalvik虚拟机给一个应用程序分配的最大堆栈量，可填写的值为12m~48m。
例如：dalvik.vm.heapsize=48m，就表示应用程序在任意时刻内可以使用的最大堆栈大小为48兆字节。这里分配的内存容量会影响到整个系统对RAM的使用程序，和程序在运行一段时间后的反应速度。这个值越大，系统消耗RAM则越快，但是程序会运行的非常稳定，尤其是游戏和视频程序的内容加载速度可以大幅度提升。值越小，系统的RAM剩余则越多，但是程序会很卡，尤其是游戏在切换场景Loading的时候会 花费很多的时间。若应用程序需要使用超过这个值的内存时，将会触发系统的垃圾收集器，系统和程序就会卡顿。
建议值是40~48m。
dalvik.vm.lockprof.threshold：
本参数控制Dalvik虚拟机调试记录程序内部锁资源争夺的阈值，默认值是500。多用于程序的数据统计，对性能较调意义不大。
dalvik.vm.stack-trace-file：
本参数控制Dalvik虚拟机的堆栈记录调试文件。用于系统调试，一般用户对其调整无意义。
dalvik.vm.execution-mode：
本参数控制Dalvik虚拟机的程序执行机制。可填写的值有”int:portable”、”int:fast”和”int:jit”。
int:portable表示以兼容模式运行(脚本翻译模式)，此模式下程序的兼容性最高，但其执行效率最低(程序优化度依赖于dalvik虚拟机版本)。官方默认此模式。　int:fast表示以快速自优化模式运行(脚本翻译和预优化混合)，此模式下程序的兼容性很高，执行效率也比较高。因为此时dalvik虚拟机允许程序使用自己的预定义优化模式和代码(包括C/C++/汇编代码)。推荐使用。　int:jit表示以Just-In-Time模式运行(JIT模式)，此模式下程序的兼容性最差，但程序一旦加载后其运行效率最高(与C/C++直接编 写的程序效率无异)，因为在此模式下dalvik虚拟机会预先将Java程序翻译成针对机器平台的本地语言(Native)，同时完全允许代码中的所有预 优化和代码，允许所有不安全的非托管代码，同时不严谨的程序如果运行在JIT模式可能会造成内存泄露。但要注意，很多Dalvik虚拟机并不支持此模式 (如官方2.2)。
dalvik.vm.dexopt-flags：
本参数控制Dalvik虚拟机的程序代码校验和优化。可填写的值有m、v和o。　m为标准选项，可以是m=y或m=n。若m=y则启用不安全代码的校验和托管代码的优化。兼容性和安全性最高，推荐使用。　v为校验选项，可与o并存。可以是v=a或v=n。若v=a则表示校验所有代码，v=n则关闭代码的校验。　o为优化选项，可与v并存。可以是o=v或o=a。若o=v则表示优化以校验过的代码，o=a则表示优化所有代码。　例如：　dalvik.vm.dexopt-flags=m=y　dalvik.vm.dexopt-flags=v=n,o=v
注意，这个参数只会影响到安装APK之后或初次使用APK时生成dex文件时有效。若整个系统(包括应用程序)为odex化，则无意义。
dalvik.vm.verify-bytecode：
本参数控制Dalvik虚拟机是否验证应用程序的可执行代码。可以与上一个参数配合使用。可填写的值为true和false。　其具体意义与dalvik.vm.dexopt-flags的v=n一模一样。但可以与dalvik.vm.dexopt-flags配合使用以取得更好的效果。
例如：　dalvik.vm.dexopt-flags=v=n,o=v　dalvik.vm.verify-bytecode=false　这样可以令后来安装的apk文件可以被优化而不被检验。
dalvik.vm.checkjni：
本参数控制Dalvik虚拟机在调用外部jni链接库的时候是否对其做安全性检验。可填写的值为true和false。　此参数会覆盖ro.kernel.android.checkjni。　若值为true，会增加程序的兼容性和稳定性，但也会增加其加载和执行的时间。
推荐为false。
dalvik.vm.deadlock-predict：
本参数控制Dalvik虚拟机对程序死锁预测处理。可填写的值有off、warn和err。　off表示关闭死锁预测功能(默认设置)。　warn表示在继续程序运行的同时只记录该死锁预测(如果为真死锁就会出现程序假死现象，然后等N久出现关闭)。　err表示预测到死锁时马上弹出FC。
注意：有些Dalvik虚拟机版本并不支持此参数。
总结：　对于本期此处给出三种常用的配置(以Defy为机型)。
超级急速流畅型：
dalvik.vm.startheapsize=16m
dalvik.vm.heapsize=48m
dalvik.vm.execution-mode=int:jit
dalvik.vm.dexopt-flags=v=n,o=v
dalvik.vm.checkjni=false
常用稳定加流畅型：
dalvik.vm.startheapsize=8m
dalvik.vm.heapsize=40m
dalvik.vm.execution-mode=int:fast
dalvik.vm.dexopt-flags=m=y
dalvik.vm.checkjni=false
超级稳定大内存型：
dalvik.vm.startheapsize=4m
dalvik.vm.heapsize=30m
dalvik.vm.execution-mode=int:portable
dalvik.vm.dexopt-flags=v=a,o=v
dalvik.vm.verify-bytecode=true
dalvik.vm.checkjni=true
系统版本定义
本期将介绍系统版本、定义等相关参数。主要用于定义系统版本特征字串，OTA字串等。由于较少用到，因此只粗略介绍。
本参数定义了系统的版本ID。为系统内部使用，OTA时作为粗略版本比较。更改后可避免OTA提示，但可能会引起预装程序(如Blur)的稳定性。
本参数定义了设置中显示的系统版本号。主要用于设置中显式出现可读版本，一般用于个性化定制和第三方应用程序对系统版本的判断(如魔趣设置)。更改后可自定义版本显示，但某些第三方应用程序会出现错误(如魔趣设置无法实现机器保修查询)。
ro.build.version.incremental:
本参数定义了系统的升级字。主要用于系统OTA精确版本比对，同时与ro.build.description和ro.build.fingerprint相匹配。更改后可以免OTA提示(如避免Miui的升级提示和Blur的升级提示)。
ro.product.model:
本参数定义了机器的型号字符串。主要用于机器型号显式定义(如系统设置中的手机型号和Blur、Google设置向导中的机型等)。更改后可自定义手机型号名称。
ro.product.locale.language:
本参数定义了系统的初始(默认)语言。此处注意是语言，如中文是zh，英文是en。更改后改变系统初次启动时的语言设置。
ro.product.locale.region:
本参数定义了系统的初始(默认)区域。此处注意是区域，如中国大陆为CN，台湾为TW，美国为US。更改后改变系统初次启动时的区域设置。　ro.build.description和ro.build.fingerprint均为ROM的编译综合说明。其中包含了平台硬件、Android版本、源代码分支和标签、OTA详细版本等。　其中的OTA部分，例如：　umts_jordan_china-user 2.3.6 4.5.3-109_DPP-14 123456 release-keys　将此数字与ro.build.version.incremental一同更改可避免OTA升级提醒(如Miui和Blur等)。
基本性能
本期将介绍与系统性能(流畅操作体验、功能速度、内存管理等)相关的参数属性和其调整方法。　虽然Defy的CPU只有800MHz，虽然Defy的RAM只有512MB，虽然摩托官方的系统优化很差，但通过本期的参数调整，依然可以获得不俗的性能。
windowsmgr.max_events_per_sec:
本参数定义了Android系统的窗体事件管理器在单位时间内可以处理的最大事件数量。通过更改本参数可以获得非常明显的丝滑流畅体验。可填写的值范围为”大于0的正整数”，官方默认为60。建议150、200、260、300这几个值。
当此值变大时，系统触控平滑度明显提高，但对应的CPU使用率也会升高，最终的结果就是电池续航能力下降。以我个人的经验来说，此值取到240左右时在系统设置中滑动可以得到接近WP7的流畅和平滑度。
ro.min_pointer_dur:
本参数定义了两次触摸之间的最短时间间隔，单位是毫秒。默认值为25，推荐值是10。通过调整此参数可以提高系统触控的灵敏度或稳定度。当此值越大时，触控越稳定。此值越小，触控越灵敏。
mot.proximity.delay：
本参数定义了手机光纤感应器的抖动消除时间，单位是毫秒。默认值是500，推荐值是250。
通过调整此参数可以提高在通话结束后屏幕点亮的速度。当此值越大时，通话结束后屏幕点亮所需要的时间越长，但在通话过程中如果手机意外瞬间离开脸部也不会点亮屏幕，可防止通话过程中的误操作(比方说通话时不 小心手机移动了一下，屏幕就会点亮，此时如果脸部触碰到了屏幕就会对通话造成影响)。此值越小，则当手机离开脸部或装入口袋后会立即点亮或关闭屏幕。
mot.proximity.distance：
本参数定义了手机屏幕上的两个触摸点之间的最短距离，若距离小于此值则认为是一个触摸点，单位是像素。默认值是60，推荐值是100。为什么推荐100呢？因为Defy的屏幕分辨率为480×854，也就是说横向有480个像素点，对应上去也就相当于是横向并排允许4个触摸点，平均一个手指一个点，这样在类似于杀西瓜等游戏中可以提升游戏操作。
ro.kernel.android.checkjni：
本参数定义了Dalvik虚拟机在执行程序的时候是否要做Jni链接库的检查工作。详细见Dalvik参数属性期。若考虑稳定性可使用true，若需要性能可使用false。注意：此参数会被Dalvik参数覆盖。
ro.media.enc.jpeg.quality：
本参数定义了JPEG图像编码器所使用的质量因子，可填写的值为1~100，默认为80，推荐为100。想照出更好的照片吗？想让照片的大小轻松上M吗？那就使用100吧。
debug.sf.hw：本参数定义了系统是否启用GPU来渲染程序的UI，默认为0，推荐为1。　但要注意，如果此值为1，在某些应用程序中可能会出现显示错乱的现象(极少见)。
persist.sys.use_dithering：本参数定义了系统渲染器对图像的缩放是否启用抖动技术。可填写的值为0或1。　当开启抖动后，图像的显示(指背景、解锁等的图像，并非图库、相机那些的)会很柔和，但会增加CPU负载，最终导致ROM卡顿。
persist.sys.purgeable_assets：本参数定义了系统是否可以清除暂时不用的数据以释放更多的RAM。可填写的值为0或1。　当值为1时，系统会定期清理不用的数据以释放更多的RAM，同时作为代价就是下次启动程序或游戏加载数据会变慢。
video.accelerate.hw：本参数定义了系统是否对视频启用硬件加速功能。这里的视频指代屏幕上显示的东西，不仅仅是”电影视频”。可填写的值为0或1。　需要注意的是：摩托官方的2.2与2.3系统对此功能支持的不是很好，开启后有时反而会降低系统流畅度，但CM系统绝对建议开启。
debug.performance.tuning：本参数定义了系统是否针对性能做较调。可填写的值为0或1。　需要注意的是：摩托官方的2.2和2.3系统对此功能支持的不是很好，开启后有时反而会降低系统流畅度。但CM系统绝对建议开启。
ro.HOME_APP_ADJ
ro.FOREGROUND_APP_ADJ
ro.VISIBLE_APP_ADJ
ro.PERCEPTIBLE_APP_ADJ
ro.HEAVY_WEIGHT_APP_ADJ
ro.SECONDARY_SERVER_ADJ
ro.BACKUP_APP_ADJ
ro.HIDDEN_APP_MIN_ADJ
ro.EMPTY_APP_ADJ
以上参数定义了各种应用程序的管理机制，这些并非一两句话可以说清楚的，想深究的同学可以Google一下OOM Killer。可填写的值为整数。这里只给出值的规律：
0代表降低进程的优先级且驻留内存；
1代表驻留内存；
4代表缓存较多的内存；
15代表尽量缓存内存。
也就是说内存缓存器是按照ADJ从大到小来进行缓存的。
大家可根据自系统中自己对各种应用程序的要求进行更改。以下给出一个经典用例：
ro.FOREGROUND_APP_ADJ=0 前台程序驻留内存(不缓存)
ro.VISIBLE_APP_ADJ=1 可见的程序驻留内存(不缓存)
ro.PERCEPTIBLE_APP_ADJ=2 缓存的RAM多一些
ro.HOME_APP_ADJ=3 桌面程序，缓存的RAM稍多一些
ro.HEAVY_WEIGHT_APP_ADJ=4 缓存的RAM再多一些
ro.SECONDARY_SERVER_ADJ=5 缓存的RAM再再多一些
ro.BACKUP_APP_ADJ=6 缓存的RAM再再再多一些
ro.HIDDEN_APP_MIN_ADJ=7 隐藏的程序，根据程序的类型进行内存管理，最低为缓存的RAM再再再再多一些，最高就是直接缓存内存。
ro.EMPTY_APP_ADJ=15 已经退出的程序，直接缓存内存
ro.FOREGROUND_APP_MEM
ro.VISIBLE_APP_MEM
ro.PERCEPTIBLE_APP_MEM
ro.HEAVY_WEIGHT_APP_MEM
ro.SECONDARY_SERVER_MEM
ro.BACKUP_APP_MEM
ro.HOME_APP_MEM
ro.HIDDEN_APP_MEM
ro.CONTENT_PROVIDER_MEM
ro.EMPTY_APP_MEM
</code></pre><h4 id="系统build-prop文件生成过程"><a href="#系统build-prop文件生成过程" class="headerlink" title="系统build.prop文件生成过程"></a>系统build.prop文件生成过程</h4><p>build.prop文件的生成过程就是系统收集各个配置属性然后合并到build.prop文件的过程。</p>
<ol>
<li>执行build/tools/buildinfo.sh</li>
<li>将system.prop中的内容添加到$(OUT_TARGET_DEVICE)/system/build.prop</li>
<li>将ADDITIONAL_BUILD_PROPERTIES的值也添加到$(OUT_TARGET_DEVICE)/system/build.prop</li>
</ol>
<blockquote>
<p>注意： 对于b288，可以在device/$(TARGET_DEVICE)/$(TARGET_DEVICE).mk文件中修改配置文件来更改build.prop配置，但是如果直接make不会覆盖build.prop文件，需要删除build.prop文件或者make clean之后再make。</p>
</blockquote>
<p>可以直接使用adb对build.prop进行修改，步骤如下：</p>
<ol>
<li>adb pull将system/build.prop拷贝出来以备修改。</li>
<li>修改build.prop中配置文件的属性。例如,ro.sf.lcd_density=167修改为ro.sf.lcd_density=160.</li>
<li>adb push将文件push到system/build.prop</li>
<li>设置权限。adb remount， adb shell chmod 0644 system/build.prop给文件设置权限。</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/uploads/logo_s.jpg"
                alt="Sparky" />
            
              <p class="site-author-name" itemprop="name">Sparky</p>
              <p class="site-description motion-element" itemprop="description">我是谁？我在做什么？我为什么要这么做？我想做什么？我要怎么做？</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">105</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Sparky</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
